[
  {
    "step": 1,
    "name": "Scan Structure",
    "role": "Mechanical Tool",
    "prompt": "scan_file_structure",
    "description": "Uses AST to extract imports, classes, and methods."
  },
  {
    "step": 2,
    "name": "Analyze Logic",
    "role": "The Scout",
    "model": "qwen2.5:7b-instruct",
    "prompt": "Based on the AST from Step 1, summarize the business logic of each endpoint. What does this service actually DO?",
    "description": "Extracts semantic meaning from code."
  },
  {
    "step": 3,
    "name": "Draft Migration Plan",
    "role": "The Architect",
    "model": "qwen2.5:7b-instruct",
    "prompt": "Create a migration plan. Move the identified logic into the standardized microservice boilerplate. Output a plan in markdown.",
    "description": "Structural planning phase."
  },
  {
    "step": 4,
    "name": "Generate Patch",
    "role": "The Surgeon",
    "model": "qwen2.5:7b-coder",
    "prompt": "Using the migration plan, generate the TokenizingPatcher JSON hunks to refactor the file. Output ONLY raw JSON.",
    "description": "Code generation phase."
  },
  {
    "step": 5,
    "name": "Apply Patch",
    "role": "Mechanical Tool",
    "prompt": "apply_safe_patch",
    "description": "Mechanically applies the JSON hunks to the source file."
  }
]
